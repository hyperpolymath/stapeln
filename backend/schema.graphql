# SPDX-License-Identifier: PMPL-1.0-or-later
# GraphQL Schema for Stapeln API surface (REST/GraphQL share NativeBridge behavior)

type Service {
  name: String!
  kind: String
  port: Int
}

type Stack {
  id: ID!
  name: String!
  description: String
  services: [Service!]!
  createdAt: String!
  updatedAt: String!
}

type Finding {
  id: String!
  severity: String!
  message: String!
  hint: String!
}

type ValidationResult {
  score: Int!
  findings: [Finding!]!
  stack: Stack!
}

input ServiceInput {
  name: String!
  kind: String
  port: Int
}

input StackInput {
  name: String
  description: String
  services: [ServiceInput!]
}

type Query {
  stack(id: ID!): Stack
  stacks: [Stack!]!
}

type Mutation {
  createStack(input: StackInput!): Stack
  updateStack(id: ID!, input: StackInput!): Stack
  validateStack(id: ID!): ValidationResult
}

