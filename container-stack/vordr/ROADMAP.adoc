// SPDX-License-Identifier: MPL-2.0-or-later
= VÃ¶rÃ°r Roadmap
:toc: auto
:toclevels: 2

== Overview

This roadmap outlines the development trajectory for VÃ¶rÃ°r, the formally verified container orchestration system. Development follows the **incremental correctness** principle: each phase delivers provably correct functionality before expanding scope.

== Phase 1: MVP â€” LSP/MCP/ABI/FFI Foundation (v0.1â€“v0.5) âœ… COMPLETE

=== v0.1 â€” LSP Protocol and Transports

[cols="1,3"]
|===
| Status | âœ… Complete (100%)

| Focus
| Language Server Protocol implementation for IDE integration

| Deliverables
a|
- LSP protocol layer (Types.res, Server.res) - 900+ lines âœ“
- Stdio transport for VS Code/Neovim/Emacs âœ“
- HTTP transport for web clients (port 8081) âœ“
- Container-aware diagnostics, hover, completion âœ“
- VS Code extension for `.ctp` and `.gatekeeper.yaml` files âœ“
|===

=== v0.2 â€” MCP Server and Svalinn Integration

[cols="1,3"]
|===
| Status | âœ… Complete (100%)

| Focus
| Model Context Protocol server for LLM/gateway integration

| Deliverables
a|
- JSON-RPC 2.0 server on port 8080 âœ“
- Standard MCP method names: `containers/*`, `images/*` âœ“
- Svalinn gateway integration tested (2-17ms response time) âœ“
- End-to-end MCP â†’ LSP flow verified âœ“
|===

=== v0.3 â€” ABI/FFI Universal Standard Compliance

[cols="1,3"]
|===
| Status | âœ… Complete (100%)

| Focus
| Idris2 ABI + Zig FFI (no C headers)

| Deliverables
a|
- Idris2 ABI definitions (Types.idr, Layout.idr, Foreign.idr) âœ“
- Dependent type proofs for interface correctness âœ“
- Memory layout verification (alignment, padding, size) âœ“
- Non-null pointer guarantees at type level âœ“
- Zig FFI with C-compatible exports (300+ lines) âœ“
- Container operations: verify, create, start, stop, list âœ“
- NO C header files (direct Idris2 â†’ Zig interface) âœ“
|===

=== v0.4 â€” ReScript LSP Decision

[cols="1,3"]
|===
| Status | âœ… Complete (Decision Documented)

| Focus
| Architecture decision: ReScript vs Rust for LSP

| Decision
a|
- **Chosen: ReScript** for LSP implementation
- Rationale: Native JSON-RPC handling, faster iteration, already complete
- No standalone distribution needed (Deno runtime acceptable)
- VS Code ecosystem expects JavaScript-based LSPs
- Documented in META.scm as ADR-002 âœ“
|===

=== v0.5 â€” Documentation and Architecture

[cols="1,3"]
|===
| Status | âœ… Complete (100%)

| Focus
| Complete documentation of MVP architecture

| Deliverables
a|
- STATE.scm updated to 100% completion âœ“
- META.scm with 6 comprehensive ADRs âœ“
- ECOSYSTEM.scm with position in verified container ecosystem âœ“
- README.adoc updated with accurate status âœ“
- ROADMAP.adoc updated with completed milestones âœ“
- LSP-ARCHITECTURE.adoc documenting LSP design âœ“
|===

=== v0.4 â€” Neuro-Symbolic Integration

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| AI-assisted orchestration with formal guarantees

| Deliverables
a|
- Planned for future release
|===

=== v0.5 â€” WASM/Edge Support

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| Browser and edge verification capabilities

| Deliverables
a|
- Planned for future release
|===

== Phase 2: Runtime Integration (v1.0â€“v2.0)

=== v1.0 â€” Rust CLI + Elixir Orchestrator Integration

[cols="1,3"]
|===
| Status | ðŸ”² Planned (Next Priority)

| Focus
| Integrate Rust CLI and Elixir orchestrator with Zig FFI

| Deliverables
a|
- Rust CLI calls Zig FFI via C ABI
- Elixir NIF bindings for Zig FFI
- End-to-end container workflow: LSP â†’ MCP â†’ Zig â†’ Elixir â†’ Runtime
- Real container runtime integration (replace mocks)
- Integration tests for full stack
|===

=== v1.5 â€” Production Runtime Features

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| Production-ready container orchestration

| Deliverables
a|
- WebSocket transport for LSP (streaming updates)
- Container lifecycle with reversibility (GenStateMachine)
- Audit trail and rollback operations
- Performance optimization (sub-5ms LSP response)
- Production deployment guide
|===

=== v2.0 â€” Ecosystem Integration and eBPF Monitoring

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| Full Svalinn/Cerro Torre integration + runtime monitoring

| Deliverables
a|
- Cerro Torre Ed25519 signature verification in production
- Gatekeeper policy engine integration
- eBPF kernel-side programs for syscall monitoring
- Anomaly detection and alerting
- OCI hooks for runtime integrity checks
|===

== Phase 3: Advanced Features (v3.0â€“v5.0)

=== v3.0 â€” Formal Verification and Proofs

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| Complete formal verification of container lifecycles

| Deliverables
a|
- Idris2 proofs for all lifecycle transitions
- Reversibility proofs (Bennett-reversible operations)
- Memory safety proofs for FFI boundary
- SBOM verification with dependent types
- CI integration for proof checking
|===

=== v4.0 â€” Plugin System and Extensibility

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| Extensible verification plugins

| Deliverables
a|
- Plugin system architecture (ReScript)
- Community plugin registry
- Custom verification policies
- Third-party LSP extension support
- Documentation and plugin templates
|===

=== v5.0 â€” AI-Assisted Orchestration

[cols="1,3"]
|===
| Status | ðŸ”² Planned

| Focus
| AI-assisted container orchestration with formal guarantees

| Deliverables
a|
- Neuro-symbolic decision making
- Autonomous remediation with proof obligations
- Learning from operational patterns
- Human-in-the-loop override system
|===

== Phase 4: Long-Term Vision (v6.0+)

=== v6.0 â€” Kubernetes Integration

- Custom Resource Definitions (CRDs)
- Admission controller webhooks
- Helm chart distribution
- Multi-cluster federation

=== v7.0 â€” Advanced Trust and Security

- Hardware security module (HSM) integration
- Threshold signatures (k-of-n verification)
- Attestation transparency log
- Supply chain integrity tracking

=== v10.0 â€” Full Ecosystem Maturity

- Community-driven development
- Educational resources and certification
- Governance framework
- Industry partnerships and standards compliance

== Development Principles

=== Incremental Correctness

Each version must be **provably correct** before the next begins. No feature ships without:

1. Formal specification (Idris2 types or Coq theorems)
2. Implementation matching specification
3. Property-based tests (Echidna/QuickCheck)
4. Integration tests with ecosystem

=== Language Discipline

Per RSR (Rhodium Standard Repositories):

[cols="1,1"]
|===
| Allowed | Banned

| ReScript, Zig, Idris2, Elixir, Rust
| TypeScript, Node.js, npm, Go, Python, Java
|===

**Technology Decisions (Documented in META.scm):**

- **ReScript** for LSP/MCP: Native JSON-RPC, optimal for protocol adapters
- **Zig** for FFI: C-compatible without headers, memory-safe by default
- **Idris2** for ABI: Dependent types for formal interface verification
- **Deno** for runtime: Replaces Node.js, secure by default
- **Elixir** for orchestration: BEAM fault tolerance, GenStateMachine
- **Rust** for CLI: Zero-cost abstractions, performance-critical paths

=== Reversibility First

Every state-changing operation must be reversible:

[source,text]
----
deploy(x) âˆ˜ undeploy(x) = identity
verify(x) âˆ˜ unverify(x) = identity (for mutable verification states)
----

== Milestones

[cols="1,2,1,1"]
|===
| Milestone | Description | Target | Status

| **M1**
| LSP protocol implementation complete with transports
| v0.1
| âœ… Complete

| **M2**
| MCP server with Svalinn integration tested
| v0.2
| âœ… Complete

| **M3**
| Idris2 ABI + Zig FFI following Universal Standard
| v0.3
| âœ… Complete

| **M4**
| ReScript LSP architecture decision documented
| v0.4
| âœ… Complete

| **M5**
| Complete MVP documentation and .scm file updates
| v0.5
| âœ… Complete

| **M6**
| Rust CLI + Elixir orchestrator integrated with Zig FFI
| v1.0
| ðŸ”² Planned

| **M7**
| Production container runtime replacing mocks
| v1.5
| ðŸ”² Planned

| **M8**
| Full Svalinn/Cerro Torre integration in production
| v2.0
| ðŸ”² Planned

| **M9**
| Complete formal verification of all lifecycle transitions
| v3.0
| ðŸ”² Planned

| **M10**
| Plugin system with community registry
| v4.0
| ðŸ”² Planned
|===

== Contributing

See link:CONTRIBUTING.adoc[CONTRIBUTING.adoc] for contribution guidelines.

All contributions must pass the link:Mustfile[Mustfile] verification gates.
